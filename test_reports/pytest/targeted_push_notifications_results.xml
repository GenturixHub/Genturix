<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="3" skipped="0" tests="20" time="1.824" timestamp="2026-02-19T09:06:58.991688+00:00" hostname="agent-env-be5c1e54-6faa-408e-9443-708466aa6f22"><testcase classname="backend.tests.test_targeted_push_notifications.TestHealthEndpoint" name="test_health_endpoint_returns_200" time="0.203" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLoginWithCredentials" name="test_superadmin_login" time="0.326" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLoginWithCredentials" name="test_admin_login" time="0.350" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLoginWithCredentials" name="test_guard_login" time="0.369" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLoginWithCredentials" name="test_resident_login" time="0.358" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLoginWithCredentials" name="test_invalid_credentials_rejected" time="0.094" /><testcase classname="backend.tests.test_targeted_push_notifications.TestSendTargetedPushNotificationExists" name="test_function_exists_in_server_py" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestSendTargetedPushNotificationExists" name="test_function_has_correct_parameters" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestSendTargetedPushNotificationExists" name="test_function_returns_dict_with_expected_keys" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLegacyPushFunctionsExist" name="test_send_push_to_user_exists" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLegacyPushFunctionsExist" name="test_send_push_to_guards_exists" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestLegacyPushFunctionsExist" name="test_send_push_to_admins_exists" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestNotifyGuardsOfPanicUnchanged" name="test_notify_guards_of_panic_exists" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestNotifyGuardsOfPanicUnchanged" name="test_notify_guards_of_panic_signature_unchanged" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestNotifyGuardsOfPanicUnchanged" name="test_notify_guards_of_panic_not_using_targeted_function" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestTargetedPushUsedInPreRegistration" name="test_preregistration_uses_targeted_push" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestTargetedPushUsedInReservations" name="test_reservations_uses_targeted_push" time="0.001" /><testcase classname="backend.tests.test_targeted_push_notifications.TestTargetedPushValidations" name="test_vapid_key_validation" time="0.005"><failure message="AssertionError: VAPID validation reason message not found&#10;assert '&quot;reason&quot;: &quot;VAPID keys not configured&quot;' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id&quot;, {&quot;background&quot;: True}),\n        (db.reservations, &quot;start_time&quot;, {&quot;background&quot;: True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n        (db.visitor_authorizations, &quot;created_by&quot;, {&quot;background&quot;: True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f&quot;[DB-INDEX] {collection_name}.{keys}: {result}&quot;)\n            success_count += 1\n        else:\n            logger.warning(f&quot;[DB-INDEX] {collection_name}.{keys}: FAILED - {result}&quot;)\n    \n    logger.info(f&quot;[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready&quot;)\n\n@app.on_event(&quot;startup&quot;)\nasync def startup_event():\n    &quot;&quot;&quot;Application startup tasks&quot;&quot;&quot;\n    await initialize_indexes()\n\n@app.on_event(&quot;shutdown&quot;)\nasync def shutdown_db_client():\n    client.close()\n'">backend/tests/test_targeted_push_notifications.py:356: in test_vapid_key_validation
    assert '"reason": "VAPID keys not configured"' in content, \
E   AssertionError: VAPID validation reason message not found
E   assert '"reason": "VAPID keys not configured"' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id", {"background": True}),\n        (db.reservations, "start_time", {"background": True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, "condominium_id", {"background": True}),\n        (db.visitor_authorizations, "created_by", {"background": True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, "condominium_id", {"background": True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f"[DB-INDEX] {collection_name}.{keys}: {result}")\n            success_count += 1\n        else:\n            logger.warning(f"[DB-INDEX] {collection_name}.{keys}: FAILED - {result}")\n    \n    logger.info(f"[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready")\n\n@app.on_event("startup")\nasync def startup_event():\n    """Application startup tasks"""\n    await initialize_indexes()\n\n@app.on_event("shutdown")\nasync def shutdown_db_client():\n    client.close()\n'</failure></testcase><testcase classname="backend.tests.test_targeted_push_notifications.TestTargetedPushValidations" name="test_condominium_validation" time="0.006"><failure message="AssertionError: Condominium validation not found&#10;assert ('&quot;reason&quot;: &quot;No condominium_id provided&quot;' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id&quot;, {&quot;background&quot;: True}),\n        (db.reservations, &quot;start_time&quot;, {&quot;background&quot;: True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n        (db.visitor_authorizations, &quot;created_by&quot;, {&quot;background&quot;: True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f&quot;[DB-INDEX] {collection_name}.{keys}: {result}&quot;)\n            success_count += 1\n        else:\n            logger.warning(f&quot;[DB-INDEX] {collection_name}.{keys}: FAILED - {result}&quot;)\n    \n    logger.info(f&quot;[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready&quot;)\n\n@app.on_event(&quot;startup&quot;)\nasync def startup_event():\n    &quot;&quot;&quot;Application startup tasks&quot;&quot;&quot;\n    await initialize_indexes()\n\n@app.on_event(&quot;shutdown&quot;)\nasync def shutdown_db_client():\n    client.close()\n' or '&quot;reason&quot;: &quot;Condominium not found&quot;' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id&quot;, {&quot;background&quot;: True}),\n        (db.reservations, &quot;start_time&quot;, {&quot;background&quot;: True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n        (db.visitor_authorizations, &quot;created_by&quot;, {&quot;background&quot;: True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f&quot;[DB-INDEX] {collection_name}.{keys}: {result}&quot;)\n            success_count += 1\n        else:\n            logger.warning(f&quot;[DB-INDEX] {collection_name}.{keys}: FAILED - {result}&quot;)\n    \n    logger.info(f&quot;[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready&quot;)\n\n@app.on_event(&quot;startup&quot;)\nasync def startup_event():\n    &quot;&quot;&quot;Application startup tasks&quot;&quot;&quot;\n    await initialize_indexes()\n\n@app.on_event(&quot;shutdown&quot;)\nasync def shutdown_db_client():\n    client.close()\n')">backend/tests/test_targeted_push_notifications.py:368: in test_condominium_validation
    assert '"reason": "No condominium_id provided"' in content or \
E   AssertionError: Condominium validation not found
E   assert ('"reason": "No condominium_id provided"' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id", {"background": True}),\n        (db.reservations, "start_time", {"background": True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, "condominium_id", {"background": True}),\n        (db.visitor_authorizations, "created_by", {"background": True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, "condominium_id", {"background": True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f"[DB-INDEX] {collection_name}.{keys}: {result}")\n            success_count += 1\n        else:\n            logger.warning(f"[DB-INDEX] {collection_name}.{keys}: FAILED - {result}")\n    \n    logger.info(f"[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready")\n\n@app.on_event("startup")\nasync def startup_event():\n    """Application startup tasks"""\n    await initialize_indexes()\n\n@app.on_event("shutdown")\nasync def shutdown_db_client():\n    client.close()\n' or '"reason": "Condominium not found"' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id", {"background": True}),\n        (db.reservations, "start_time", {"background": True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, "condominium_id", {"background": True}),\n        (db.visitor_authorizations, "created_by", {"background": True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, "condominium_id", {"background": True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f"[DB-INDEX] {collection_name}.{keys}: {result}")\n            success_count += 1\n        else:\n            logger.warning(f"[DB-INDEX] {collection_name}.{keys}: FAILED - {result}")\n    \n    logger.info(f"[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready")\n\n@app.on_event("startup")\nasync def startup_event():\n    """Application startup tasks"""\n    await initialize_indexes()\n\n@app.on_event("shutdown")\nasync def shutdown_db_client():\n    client.close()\n')</failure></testcase><testcase classname="backend.tests.test_targeted_push_notifications.TestTargetedPushValidations" name="test_targeting_requirement_validation" time="0.004"><failure message="AssertionError: Targeting requirement validation not found&#10;assert '&quot;reason&quot;: &quot;No targeting specified (target_roles or target_user_ids required)&quot;' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id&quot;, {&quot;background&quot;: True}),\n        (db.reservations, &quot;start_time&quot;, {&quot;background&quot;: True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n        (db.visitor_authorizations, &quot;created_by&quot;, {&quot;background&quot;: True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, &quot;condominium_id&quot;, {&quot;background&quot;: True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f&quot;[DB-INDEX] {collection_name}.{keys}: {result}&quot;)\n            success_count += 1\n        else:\n            logger.warning(f&quot;[DB-INDEX] {collection_name}.{keys}: FAILED - {result}&quot;)\n    \n    logger.info(f&quot;[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready&quot;)\n\n@app.on_event(&quot;startup&quot;)\nasync def startup_event():\n    &quot;&quot;&quot;Application startup tasks&quot;&quot;&quot;\n    await initialize_indexes()\n\n@app.on_event(&quot;shutdown&quot;)\nasync def shutdown_db_client():\n    client.close()\n'">backend/tests/test_targeted_push_notifications.py:381: in test_targeting_requirement_validation
    assert '"reason": "No targeting specified (target_roles or target_user_ids required)"' in content, \
E   AssertionError: Targeting requirement validation not found
E   assert '"reason": "No targeting specified (target_roles or target_user_ids required)"' in 'from fastapi import FastAPI, APIRouter, Depends, HTTPException, status, Request, Body\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom fastapi.responses import JSONResponse\nfrom dotenv import load_dotenv\nfrom starlette.middleware.cors import CORSMiddleware\nfrom motor.motor_asyncio import AsyncIOMotorClient\nimport os\nimport logging\nimport asyncio\nimport secrets\nimport string\nimport json\nimport hashlib\nfrom pathlib import Path\nfrom pydantic import BaseModel, Field, EmailStr, field_validator\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom datetime import datetime, timezone, timedelta\nfrom time import time as get_time\nimport bcrypt\nimport jwt\nfrom enum import Enum\nfrom bson import ObjectId\nfrom emergentintegrations.payments.stripe.checkout import StripeCheckout, CheckoutSessionResponse, CheckoutStatusResponse, CheckoutSessionRequest\nimport resend\nfrom pywebpush import webpush, WebPushException\n\nROOT_DIR = Path(__file__).parent\nload_dotenv(ROOT_DIR / \'.env\')\n\n# MongoDB connection\nmongo_url = os.environ[\'MONGO_URL\']\nclient = AsyncIOMotorClient(mongo_url)\ndb = client[os.environ[\'DB_NAME\']]\n\n# =============...ium_id", {"background": True}),\n        (db.reservations, "start_time", {"background": True}),\n        # Visitor authorizations (multi-tenant queries)\n        (db.visitor_authorizations, "condominium_id", {"background": True}),\n        (db.visitor_authorizations, "created_by", {"background": True}),\n        # Visitor entries (multi-tenant queries)\n        (db.visitor_entries, "condominium_id", {"background": True}),\n    ]\n    \n    success_count = 0\n    for collection, keys, options in indexes_to_create:\n        collection_name = collection.name\n        success, result = await safe_create_index(collection, keys, **options)\n        if success:\n            logger.info(f"[DB-INDEX] {collection_name}.{keys}: {result}")\n            success_count += 1\n        else:\n            logger.warning(f"[DB-INDEX] {collection_name}.{keys}: FAILED - {result}")\n    \n    logger.info(f"[DB-INDEX] Initialization complete: {success_count}/{len(indexes_to_create)} indexes ready")\n\n@app.on_event("startup")\nasync def startup_event():\n    """Application startup tasks"""\n    await initialize_indexes()\n\n@app.on_event("shutdown")\nasync def shutdown_db_client():\n    client.close()\n'</failure></testcase></testsuite></testsuites>