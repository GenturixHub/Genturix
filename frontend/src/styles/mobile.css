/**
 * GENTURIX - Mobile-Only Styles
 * 
 * Estilos que SOLO aplican en mobile (≤1023px)
 * Desktop (≥1024px) NO se ve afectado
 * 
 * PHASE 1: Global Mobile Rules
 * - Minimum touch target: 48px
 * - Increased vertical spacing
 * - Full-width inputs
 * - Full-screen modals
 * - No horizontal scrolling
 */

/* ============================================
   MOBILE-ONLY UTILITIES (≤1023px)
   ============================================ */

@media (max-width: 1023px) {
  /* ==========================================
     GLOBAL TOUCH TARGETS (48px minimum)
     ========================================== */
  
  /* All buttons get minimum touch target */
  button:not(.no-touch-adjust),
  [role="button"]:not(.no-touch-adjust),
  .btn {
    min-height: 44px;
    min-width: 44px;
  }

  /* All interactive list items */
  [role="listitem"],
  [role="menuitem"],
  [role="option"],
  li.interactive {
    min-height: 48px;
    padding-top: 12px;
    padding-bottom: 12px;
  }

  /* All clickable cards */
  .card-clickable,
  [data-clickable="true"] {
    min-height: 48px;
  }

  /* ==========================================
     INCREASED VERTICAL SPACING
     ========================================== */
  
  .space-y-4 {
    gap: 1.25rem;
  }

  .space-y-6 {
    gap: 2rem;
  }

  .gap-4 {
    gap: 1.25rem;
  }

  .gap-6 {
    gap: 2rem;
  }

  /* ==========================================
     FORM ELEMENTS (Full-width, taller)
     ========================================== */
  
  /* All inputs get mobile sizing - but preserve touch functionality */
  input:not([type="checkbox"]):not([type="radio"]),
  textarea,
  select,
  [role="combobox"] {
    min-height: 48px !important;
    font-size: 16px !important; /* Prevents iOS zoom */
    width: 100%;
    touch-action: auto !important;
    -webkit-user-select: text !important;
    user-select: text !important;
    pointer-events: auto !important;
  }

  /* Ensure ALL elements in dialogs are interactive - CRITICAL FIX */
  [role="dialog"] *,
  [data-radix-dialog-content] *,
  [data-state="open"] * {
    pointer-events: auto;
  }

  /* Ensure inputs in dialogs are interactive */
  [role="dialog"] input,
  [role="dialog"] textarea,
  [role="dialog"] select,
  [role="dialog"] button,
  [data-radix-dialog-content] input,
  [data-radix-dialog-content] textarea,
  [data-radix-dialog-content] select,
  [data-radix-dialog-content] button {
    pointer-events: auto !important;
    touch-action: auto !important;
    -webkit-user-select: text !important;
    user-select: text !important;
  }

  /* Ensure labels and other elements don't block inputs */
  [role="dialog"] label,
  [role="dialog"] div,
  [role="dialog"] span {
    pointer-events: none;
  }
  
  /* Re-enable pointer events for interactive elements */
  [role="dialog"] input,
  [role="dialog"] textarea,
  [role="dialog"] select,
  [role="dialog"] button,
  [role="dialog"] [role="combobox"],
  [role="dialog"] [role="option"],
  [role="dialog"] a {
    pointer-events: auto !important;
  }

  /* Form field containers */
  .form-field,
  .input-group {
    width: 100%;
  }

  /* ==========================================
     MODAL FULL-SCREEN ON MOBILE
     ========================================== */
  
  /* 
   * IMPORTANT: Do NOT override Radix Dialog behavior globally.
   * Radix handles positioning and overflow correctly.
   * Only apply mobile-specific tweaks for our custom classes.
   */
  
  /* Custom mobile sheet behavior */
  .mobile-sheet {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    top: auto !important;
    max-height: 90vh !important;
    border-radius: 1rem 1rem 0 0 !important;
    animation: slideUp 0.3s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  /* ==========================================
     NO HORIZONTAL SCROLLING
     ========================================== */
  
  html {
    overflow-x: hidden;
  }
  
  /* Only prevent horizontal scroll on main content, NOT on modals */
  body:not(:has([data-state="open"])) {
    overflow-x: hidden;
  }

  .overflow-x-auto:not([role="dialog"] *) {
    overflow-x: hidden;
  }

  /* Force tables to not overflow */
  table {
    width: 100%;
    table-layout: fixed;
  }

  /* ==========================================
     VISIBILITY UTILITIES
     ========================================== */
  
  /* Hide elements on mobile */
  .hide-on-mobile {
    display: none !important;
  }

  /* Show elements only on mobile */
  .show-on-mobile {
    display: block !important;
  }

  .flex-on-mobile {
    display: flex !important;
  }

  /* ==========================================
     SAFE AREA (Notched phones)
     ========================================== */
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 16px);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0);
  }

  /* Content padding when bottom nav is present */
  .mobile-content-padding {
    padding-bottom: calc(80px + env(safe-area-inset-bottom, 16px));
  }

  /* ==========================================
     BUTTON STYLES
     ========================================== */
  
  /* Full width buttons on mobile */
  .mobile-full-width {
    width: 100% !important;
  }

  /* Larger touch targets */
  .mobile-touch-target {
    min-height: 48px !important;
    min-width: 48px !important;
  }

  /* Mobile-friendly button sizing */
  .mobile-btn {
    min-height: 48px;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    font-size: 1rem;
  }

  /* ==========================================
     TABLE → CARD CONVERSION
     ========================================== */
  
  /* Mobile card layout for tables */
  .mobile-card-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }

  /* Hide desktop tables on mobile */
  .desktop-table {
    display: none !important;
  }

  /* Show mobile cards */
  .mobile-cards {
    display: block !important;
  }

  /* ==========================================
     MODAL FULL-SCREEN (Legacy support)
     ========================================== */
  
  /* Mobile modal fullscreen */
  .mobile-modal-fullscreen {
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    margin: 0 !important;
  }

  /* Mobile input sizing */
  .mobile-input {
    height: 48px !important;
    font-size: 16px !important; /* Prevents iOS zoom */
  }

  /* Mobile header compact */
  .mobile-header-compact {
    padding: 0.75rem 1rem;
  }

  /* Hide sidebar on mobile */
  .desktop-sidebar {
    display: none !important;
  }

  /* Mobile main content full width */
  .mobile-main-full {
    margin-left: 0 !important;
    width: 100% !important;
  }

  /* Mobile tabs - hidden when using bottom nav */
  .desktop-tabs {
    display: none !important;
  }

  /* Larger spacing on mobile */
  .mobile-spacing {
    gap: 1rem;
  }

  /* Mobile scroll area height */
  .mobile-scroll-area {
    height: calc(100vh - 160px) !important;
  }

  /* Mobile alert card - larger touch area */
  .mobile-alert-card {
    padding: 1rem;
    min-height: 100px;
  }

  /* Mobile action button row */
  .mobile-action-row {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .mobile-action-row > * {
    width: 100%;
  }

  /* Typography adjustments for mobile */
  .mobile-text-lg {
    font-size: 1.125rem;
    line-height: 1.75rem;
  }

  .mobile-text-base {
    font-size: 1rem;
    line-height: 1.5rem;
  }

  /* Mobile header with back button */
  .mobile-page-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    border-bottom: 1px solid #1E293B;
    background: #0A0A0F;
    position: sticky;
    top: 0;
    z-index: 40;
  }

  /* Floating action button mobile */
  .mobile-fab {
    position: fixed;
    bottom: 100px;
    right: 1rem;
    z-index: 45;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
}

/* ============================================
   DESKTOP-ONLY UTILITIES (≥1024px)
   ============================================ */

@media (min-width: 1024px) {
  /* Show elements only on desktop */
  .show-on-desktop {
    display: block !important;
  }

  .flex-on-desktop {
    display: flex !important;
  }

  /* Hide elements on desktop */
  .hide-on-desktop {
    display: none !important;
  }

  /* Desktop tables visible */
  .desktop-table {
    display: table !important;
  }

  /* Mobile cards hidden on desktop */
  .mobile-cards {
    display: none !important;
  }

  /* Desktop sidebar visible */
  .desktop-sidebar {
    display: flex !important;
  }

  /* Desktop tabs visible */
  .desktop-tabs {
    display: flex !important;
  }
}

/* ============================================
   BOTTOM NAV SPECIFIC STYLES
   ============================================ */

@media (max-width: 1023px) {
  /* Ensure bottom nav doesn't overlap content */
  body {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* Bottom nav backdrop blur support */
  @supports (backdrop-filter: blur(12px)) {
    .bottom-nav-blur {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
  }

  /* Center button glow animation */
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
    }
    50% {
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
    }
  }

  .bottom-nav-center-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }
}

/* ============================================
   TABLET SPECIFIC (768px - 1023px)
   ============================================ */

@media (min-width: 768px) and (max-width: 1023px) {
  /* Tablet-specific adjustments */
  .tablet-grid-2 {
    grid-template-columns: repeat(2, 1fr);
  }

  .tablet-padding {
    padding: 1.5rem;
  }
}

/* ============================================
   SMALL MOBILE (≤430px)
   ============================================ */

@media (max-width: 430px) {
  /* Extra small mobile adjustments */
  .small-mobile-text {
    font-size: 0.875rem;
  }

  .small-mobile-padding {
    padding: 0.75rem;
  }

  /* Compact bottom nav on small screens */
  .bottom-nav-compact {
    padding-bottom: 0.5rem;
  }
}

/* ============================================
   LANDSCAPE MOBILE
   ============================================ */

@media (max-width: 1023px) and (orientation: landscape) {
  /* Reduce vertical spacing in landscape */
  .landscape-compact {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .landscape-scroll {
    max-height: 60vh;
    overflow-y: auto;
  }
}
