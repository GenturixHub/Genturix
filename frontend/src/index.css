@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@400;600;700;800&family=Public+Sans:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme System - Centralized Color Palette */
@import './styles/theme.css';

/* Emergency Button Styles */
@import './styles/emergency-buttons.css';

/* Mobile-specific styles */
@import './styles/mobile.css';

/* ========================================
   GENTURIX PWA - Mobile-First Styles
   ======================================== */

body {
    margin: 0;
    font-family: 'Public Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overscroll-behavior-y: contain; /* Prevent pull-to-refresh */
    -webkit-tap-highlight-color: transparent; /* Remove tap highlight */
}

/* Mobile scroll optimization */
html, body, #root {
    height: 100%;
    overflow: hidden;
}

#root {
    display: flex;
    flex-direction: column;
}

/* ========================================
   SCROLL CONTAINER - Mobile Physics
   ======================================== */
.scroll-container {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
    scroll-behavior: smooth;
}

/* Ensure scroll containers can shrink in flex layouts */
.scroll-container {
    min-height: 0;
    flex: 1;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Outfit', sans-serif;
}

code, .mono {
    font-family: 'JetBrains Mono', monospace;
}

/* ========================================
   CSS Variables - Dark Theme Base
   (Primary colors now in theme.css)
   ======================================== */

@layer base {
    * {
        @apply border-border;
    }
    body {
        @apply bg-background text-foreground;
        background-color: #05050A;
    }
}

/* ========================================
   Safe Area Support (iPhone notch, etc.)
   ======================================== */

.safe-area {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

.safe-area-top {
    padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
}

/* ========================================
   Touch Optimizations
   ======================================== */

.touch-manipulation {
    touch-action: manipulation;
}

/* Larger touch targets on mobile */
@media (max-width: 768px) {
    button, 
    [role="button"],
    a,
    input,
    select,
    textarea {
        min-height: 44px; /* iOS recommended minimum */
    }
}

/* ========================================
   Custom Scrollbar
   ======================================== */

::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: #1E293B;
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: #334155;
}

/* ========================================
   Dropdown & Select Scroll Fix (Production Safe)
   ======================================== */

/* Ensure Select dropdowns always have scroll capability */
[data-radix-select-content],
[data-radix-popper-content-wrapper] {
    max-height: min(60vh, 400px) !important;
    overflow-y: auto !important;
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
}

/* Scrollable list containers */
.dropdown-condominios,
.scrollable-list {
    max-height: min(60vh, 600px);
    overflow-y: auto;
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: #3B82F6 #1E293B;
}

/* Ensure parent containers don't block overflow */
[data-radix-select-viewport] {
    max-height: inherit !important;
    overflow-y: auto !important;
}

/* Hide scrollbar on mobile for cleaner look */
@media (max-width: 768px) {
    ::-webkit-scrollbar {
        display: none;
    }
    
    * {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
}

/* Utility class to hide scrollbar while maintaining scroll functionality */
.scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
}

/* Mobile horizontal scroll tabs - touch friendly */
.mobile-scroll-tabs {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scroll-snap-type: x proximity;
}

.mobile-scroll-tabs > * {
    scroll-snap-align: start;
}

/* ========================================
   Glassmorphism & Cards
   ======================================== */

.glass {
    background: rgba(15, 17, 26, 0.8);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-dark {
    background: rgba(5, 5, 10, 0.9);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.grid-card {
    background: #0F111A;
    border: 1px solid #1E293B;
    border-radius: 0.75rem;
    transition: all 0.2s ease-in-out;
}

.grid-card:hover {
    border-color: #7C3AED;
}

/* ========================================
   Status & Badge Colors
   ======================================== */

.badge-success {
    @apply bg-green-500/10 text-green-400 border border-green-500/20;
}

.badge-warning {
    @apply bg-yellow-500/10 text-yellow-400 border border-yellow-500/20;
}

.badge-error {
    @apply bg-red-500/10 text-red-400 border border-red-500/20;
}

.badge-info {
    @apply bg-blue-500/10 text-blue-400 border border-blue-500/20;
}

/* ========================================
   Emergency Button Pulse Animation
   ======================================== */

@keyframes pulse-alert {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.02);
    }
}

.pulse-alert {
    animation: pulse-alert 1.5s ease-in-out infinite;
}

/* ========================================
   Sidebar Styles (Desktop)
   ======================================== */

.sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-lg text-muted-foreground transition-all duration-200;
}

.sidebar-item:hover {
    @apply bg-muted text-foreground;
}

.sidebar-item.active {
    @apply bg-primary/10 text-primary border-l-2 border-primary;
}

/* ========================================
   Data Tables (Desktop)
   ======================================== */

.data-table {
    @apply w-full border-collapse;
}

.data-table th {
    @apply text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider py-3 px-4 border-b border-border;
}

.data-table td {
    @apply py-3 px-4 border-b border-border text-sm;
}

.data-table tr:hover td {
    @apply bg-muted/50;
}

/* ========================================
   Form Inputs
   ======================================== */

input:focus, select:focus, textarea:focus {
    @apply ring-2 ring-primary/50 border-primary outline-none;
}

/* ========================================
   Button Styles
   ======================================== */

.btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90 transition-colors duration-200;
}

.btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/90 transition-colors duration-200;
}

.btn-outline {
    @apply border border-border bg-transparent hover:bg-muted transition-colors duration-200;
}

/* ========================================
   Page Transitions
   ======================================== */

.page-enter {
    opacity: 0;
    transform: translateY(10px);
}

.page-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 200ms, transform 200ms;
}

/* ========================================
   Loading Spinner
   ======================================== */

.spinner {
    @apply animate-spin rounded-full border-2 border-muted border-t-primary;
}

/* ========================================
   Responsive Utilities
   ======================================== */

@media (max-width: 768px) {
    .mobile-hidden {
        display: none !important;
    }
    
    /* Stack cards vertically on mobile */
    .mobile-stack {
        flex-direction: column;
    }
    
    /* Full width buttons on mobile */
    .mobile-full-width {
        width: 100%;
    }
}

@media (min-width: 769px) {
    .desktop-hidden {
        display: none !important;
    }
}

/* ========================================
   PWA Specific Styles
   ======================================== */

/* Standalone mode adjustments */
@media all and (display-mode: standalone) {
    body {
        /* Extra padding when running as installed app */
    }
    
    #pwa-install-prompt {
        display: none !important;
    }
}

/* ========================================
   Animation Utilities
   ======================================== */

.fade-in {
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-up {
    animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========================================
   Selection & Focus
   ======================================== */

::selection {
    background-color: #7C3AED;
    color: white;
}

*:focus-visible {
    outline: 2px solid #7C3AED;
    outline-offset: 2px;
}

/* Custom scrollbar for dark theme */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #0F111A;
}

::-webkit-scrollbar-thumb {
    background: #1E293B;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #334155;
}

/* Glassmorphism utilities */
.glass {
    background: rgba(15, 17, 26, 0.8);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-dark {
    background: rgba(5, 5, 10, 0.9);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

/* Grid borders style */
.grid-card {
    background: #0F111A;
    border: 1px solid #1E293B;
    border-radius: 0.5rem;
    transition: all 0.2s ease-in-out;
}

.grid-card:hover {
    border-color: #7C3AED;
}

/* Status colors */
.status-success {
    color: #10B981;
}

.status-warning {
    color: #F59E0B;
}

.status-error {
    color: #EF4444;
}

.status-info {
    color: #0EA5E9;
}

/* Pulse animation for alerts */
@keyframes pulse-alert {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.pulse-alert {
    animation: pulse-alert 2s ease-in-out infinite;
}

/* Panic button special styles */
.panic-button {
    background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
    transition: all 0.3s ease;
}

.panic-button:hover {
    box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
    transform: scale(1.02);
}

.panic-button:active {
    transform: scale(0.98);
}

/* Sidebar styles */
.sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-md text-muted-foreground transition-all duration-200;
}

.sidebar-item:hover {
    @apply bg-muted text-foreground;
}

.sidebar-item.active {
    @apply bg-primary/10 text-primary border-l-2 border-primary;
}

/* Data table styles */
.data-table {
    @apply w-full border-collapse;
}

.data-table th {
    @apply text-left text-xs font-semibold text-muted-foreground uppercase tracking-wider py-3 px-4 border-b border-border;
}

.data-table td {
    @apply py-3 px-4 border-b border-border text-sm;
}

.data-table tr:hover td {
    @apply bg-muted/50;
}

/* Badge variants */
.badge-success {
    @apply bg-green-500/10 text-green-400 border border-green-500/20;
}

.badge-warning {
    @apply bg-yellow-500/10 text-yellow-400 border border-yellow-500/20;
}

.badge-error {
    @apply bg-red-500/10 text-red-400 border border-red-500/20;
}

.badge-info {
    @apply bg-blue-500/10 text-blue-400 border border-blue-500/20;
}

/* Input focus styles */
input:focus, select:focus, textarea:focus {
    @apply ring-2 ring-primary/50 border-primary;
}

/* Button variants */
.btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90 transition-colors duration-200;
}

.btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/90 transition-colors duration-200;
}

.btn-outline {
    @apply border border-border bg-transparent hover:bg-muted transition-colors duration-200;
}

/* Page transitions */
.page-enter {
    opacity: 0;
    transform: translateY(10px);
}

.page-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 300ms, transform 300ms;
}

/* Loading spinner */
.spinner {
    @apply animate-spin rounded-full border-2 border-muted border-t-primary;
}

/* Responsive utilities */
@media (max-width: 768px) {
    .mobile-hidden {
        display: none;
    }
}

@media (min-width: 769px) {
    .desktop-hidden {
        display: none;
    }
}
